{% extends "base.html" %}

{% block title %}Notes{% endblock %}

{% block content %}
<h2 class="mb-3">All Notes</h2>

{# category_filter #}
<form method="get" class="mb-4">
    <div class="row g-3 align-items-center">
        <div class="col-auto">
            <select name="category" class="form-select form-select-sm">
                <option value="">All Categories</option>
                {% for category in categories %}
                    <option value="{{ category.id }}"
                        {% if request.GET.category|default:'' == category.id|stringformat:"s" %}selected{% endif %}>
                        {{ category.title }}
                    </option>
                {% endfor %}
            </select>
        </div>
        <div class="col-auto">
            <button class="btn btn-primary btn-sm" type="submit">Filter</button>
        </div>
        <div class="col-auto">
            <a href="{% url 'note_add' %}" class="btn btn-success btn-sm">+ Add Note</a>
        </div>
    </div>
</form>

<div class="row">
    {% for note in notes %}
        <div class="col-md-6 mb-3">
            <div class="card card-dark p-3 h-100">
                <h4>{{ note.title }}</h4>
                <p>{{ note.text|truncatewords:25 }}</p>

                <p class="text-info mb-1">Category: {{ note.category.title }}</p>

                {% if note.reminder %}
                    <p class="text-secondary">Reminder: {{ note.reminder }}</p>
                {% endif %}

                <a href="{% url 'note_detail' note.id %}" class="btn btn-outline-light mt-auto">Open</a>
            </div>
        </div>
    {% endfor %}
</div>

{% endblock %}



